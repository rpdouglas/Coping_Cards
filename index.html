<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>52 Coping Cards for Cravings</title>
  <link rel="manifest" href="manifest.json">
  <style>
    :root {
      --bg: #f7f7f9;
      --card-radius: 16px;
      --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;font-family:var(--font-family);background:linear-gradient(180deg,#f4f7fb,#ffffff);display:flex;align-items:center;justify-content:center}
    .app{width:100%;max-width:720px;padding:24px;box-sizing:border-box}
    .hero{background:#ffffff;padding:28px;border-radius:18px;box-shadow:0 6px 18px rgba(32,40,60,0.08);text-align:center}
    h1{margin:0;font-size:28px}
    p.sub{color:#556;opacity:0.8;margin-top:8px}
    button.primary{margin-top:20px;padding:14px 20px;border-radius:12px;border:0;background:#2b77f0;color:#fff;font-size:18px;font-weight:600;width:100%;box-shadow:0 6px 16px rgba(43,119,240,0.3);cursor:pointer;transition:background 0.2s}
    button.primary:hover{background:#2361c4}
    button{cursor:pointer;background:none;border:none;color:#2b77f0;font-size:16px;padding:8px;font-weight:500}
    /* ADDED FOR ACCESSIBILITY */
    button:focus-visible {
      outline: 2px solid #2b77f0;
      outline-offset: 2px;
    }
    .card-area{min-height:360px;background:#fff;border-radius:var(--card-radius);padding:40px 24px 24px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;box-shadow:0 6px 18px rgba(32,40,60,0.08);text-align:center}
    #cardIcon{font-size:80px;line-height:1;margin-bottom:12px}
    #cardSuit{font-size:24px;font-weight:600;text-transform:uppercase;color:#444}
    #cardText{font-size:24px;font-weight:500;margin:20px 0 40px;padding:0 20px;color:#333}
    .actions button{margin:0 10px}
    .status-text{font-size:14px;color:#777;margin-top:10px}
  </style>
</head>
<body>
  <div class="app">
    <div id="homeScreen">
      <div class="hero">
        <h1>52 Coping Cards</h1>
        <p class="sub">Need a quick strategy to manage a craving? Draw a card.</p>
        <button id="drawBtn" class="primary">Draw a Card</button>
      </div>
    </div>
    
    <div id="cardView" style="display:none;">
      <div id="cardArea" class="card-area">
        <div>
          <span id="cardIcon"></span>
          <div id="cardSuit"></div>
        </div>
        <p id="cardText"></p>
        <div class="actions">
          <button id="nextBtn">Next Card</button>
          <button id="shuffleBtn">Shuffle Deck</button>
          <button id="resetBtn">Reset</button>
        </div>
        <div id="statusText" class="status-text"></div>
      </div>
    </div>
  </div>
  
  <script>
    // CLEANED UP: RGB colors removed as they were not used by the suitColor function.
    const cards = [
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Tense and then relax your muscles. Repeat 3 times.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Do 10 jumping jacks or jog in place for 30 seconds.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Stretch your entire body for 60 seconds.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Go for a walk, even if it is just a lap around the house.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Take 5 deep breaths, focusing only on the air moving in and out.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Clean an area of your home for 5 minutes (e.g., wash a few dishes).'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Do a quick chore like taking out the trash or folding one piece of laundry.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Drink a full glass of water or a soothing hot beverage.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Splash cold water on your face.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Change your location. Move to another room or step outside.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Do a 2-minute wall sit or plank.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Hold ice in your hand for a minute until the feeling subsides.'},
      {suit: 'Action & Movement', suit_key: 'blue', icon: 'ðŸƒâ€â™‚ï¸', text: 'Eat a small, healthy snack, like a piece of fruit.'},
      
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Use a grounding technique. Name 5 things you see, 4 you touch, 3 you hear, 2 you smell, 1 you taste.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Write down three things you are grateful for right now.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Picture a favorite memory, like a vacation or a celebration. Focus on the details.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Say a positive affirmation out loud 10 times.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Watch a funny video or read a lighthearted article.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Try to recall the lyrics to your favorite song, word for word.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Look at a complex image or pattern and try to find a repeating element.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Do a quick Sudoku or word search puzzle.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Listen to a guided meditation for 5 minutes.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Imagine the feeling of the craving passing and how good it will feel.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Read a book or news article for 5 minutes.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Do a body scan. Focus on each part of your body from head to toe.'},
      {suit: 'Mind & Focus', suit_key: 'green', icon: 'ðŸ§ ', text: 'Mentally list all the cities or states you can remember.'},

      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Call or text a supportive friend or family member.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Check in with your sponsor or accountability partner.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Send a quick encouraging text to someone else in recovery.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Write down a commitment you can share with a friend later.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Read a few passages from an inspirational book or literature.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Go online to find a quick, virtual support meeting.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Write a quick email or note to thank someone in your life.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Say your name and what you are feeling right now out loud to an empty room.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Think about who in your life you could help with something small today.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Reach out to a professional (therapist, doctor) for advice if the craving persists.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Talk to a pet or plant for 5 minutes.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Offer a genuine compliment to a stranger or person nearby.'},
      {suit: 'Connection & Support', suit_key: 'orange', icon: 'ðŸ’¬', text: 'Read through old notes or cards from loved ones.'},

      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Write a short story or poem about your current feeling.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Listen to a piece of classical music youâ€™ve never heard before.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Draw or doodle for 5 minutes without judging the result.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Watch a short documentary or educational video on a random topic.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Pick up a new musical instrument (even a simple one like a harmonica) and try it.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Look up a recipe and plan to make it later this week.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Browse an online museum or art gallery.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Start a journal entry about your goals for the next month.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Learn a few words in a new language using an app or website.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Write down the ABCs backwards.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Look up the definition of a word you donâ€™t know and use it in a sentence.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Do something tactile, like playing with modeling clay or sand.'},
      {suit: 'Creative & Learning', suit_key: 'purple', icon: 'ðŸŽ¨', text: 'Try to balance an object on your finger for 60 seconds.'}
    ];

    let deck = [...cards]; // Full set of cards, initially available

    function suitColor(suit_key){
      switch(suit_key){
        case 'blue': return '#DADFF9';
        case 'green': return '#DFF5D8';
        case 'orange': return '#FFF2E0';
        case 'purple': return '#F1E6FF';
        default: return '#fff';
      }
    }

    function updateStatus(){
      document.getElementById('statusText').textContent = `Cards left in deck: ${deck.length} / 52`;
    }

    function renderCard(c){
      document.getElementById('cardIcon').textContent = c.icon;
      document.getElementById('cardSuit').textContent = c.suit;
      document.getElementById('cardText').textContent = c.text;
      document.getElementById('cardArea').style.background = suitColor(c.suit_key);
      updateStatus();
    }

    function drawRandom(){
      if(deck.length === 0) return null;
      const idx = Math.floor(Math.random()*deck.length);
      const card = deck.splice(idx,1)[0];
      return card;
    }
    
    // Event Listeners
    document.getElementById('drawBtn').addEventListener('click', ()=>{
      const card = drawRandom();
      if(!card) return alert('Deck empty â€” shuffle or reset.');
      renderCard(card);
      document.getElementById('homeScreen').style.display = 'none';
      document.getElementById('cardView').style.display = 'block';
    });

    document.getElementById('nextBtn').addEventListener('click', ()=>{
      const card = drawRandom();
      if(!card) return alert('Deck empty â€” shuffle or reset.');
      renderCard(card);
    });

    document.getElementById('shuffleBtn').addEventListener('click', ()=>{
      deck = [...cards].sort(()=>Math.random()-0.5);
      updateStatus();
      alert('Deck shuffled.');
    });

    document.getElementById('resetBtn').addEventListener('click', ()=>{
      deck = [...cards];
      document.getElementById('homeScreen').style.display = 'block';
      document.getElementById('cardView').style.display = 'none';
      updateStatus();
    });

    // Initial status update
    updateStatus();

    // Register Service Worker
    if('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(function(reg) {
          console.log('Service Worker Registered');
        })
        .catch(function(err) {
          console.log('Service Worker Registration Failed:', err);
        });
    }
  </script>
</body>
</html>
